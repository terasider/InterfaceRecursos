[
  {
    "title": "Inicialização",
    "content": "<!DOCTYPE html>\n<html lang=\"pt-br\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>Comparador de Texto PDF – Dakialem</title>"
  },
  {
    "title": "CSS",
    "content": " <style>\n    body {\n      margin: 0;\n      font-family: 'Segoe UI', sans-serif;\n      background-color: #f7f9fc;\n      color: #333;\n    }\n\n    header {\n      background-color: #003366;\n      color: #fff;\n      padding: 20px;\n      text-align: center;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n    }\n\n    header h1 {\n      margin: 0;\n      font-size: 1.8rem;\n    }\n\n    main {\n      padding: 30px 20px;\n      max-width: 1200px;\n      margin: auto;\n    }\n\n    .upload-section {\n      margin-bottom: 20px;\n    }\n\n    label {\n      font-weight: bold;\n      display: block;\n      margin-bottom: 5px;\n    }\n\n    input[type=\"file\"] {\n      padding: 5px;\n    }\n\n    .file-name {\n      font-size: 0.9rem;\n      color: #666;\n      margin-bottom: 15px;\n    }\n\n    button {\n      background-color: #0066cc;\n      color: white;\n      border: none;\n      padding: 10px 20px;\n      font-size: 1rem;\n      cursor: pointer;\n      margin-top: 10px;\n    }\n\n    button:hover {\n      background-color: #004999;\n    }\n\n    .stats-summary {\n      margin-top: 25px;\n      background: #ffffff;\n      padding: 15px 20px;\n      border-left: 4px solid #0066cc;\n      box-shadow: 0 2px 6px rgba(0,0,0,0.1);\n    }\n\n    .stats-summary h3 {\n      margin-top: 0;\n      font-size: 1.2rem;\n    }\n\n.result-container {\n  display: flex;\n  gap: 20px;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n\n.text-block {\n  flex: 0 0 49%;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  padding: 10px;\n  overflow-y: auto;\n  max-height: 600px;\n  white-space: pre-wrap;\n  text-align: left;\n  font-family: monospace;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n\n\n    .highlight1 {\n      background-color: #ffd6d6;\n    }\n\n    .highlight2 {\n      background-color: #d6ffd6;\n    }\n\n    footer {\n      text-align: center;\n      padding: 20px;\n      background-color: #003366;\n      color: white;\n      margin-top: 40px;\n    }\n  </style>"
  },
  {
    "title": "CDN",
    "content": "<script src=\"https://unpkg.com/diff-match-patch@1.0.5/index.js\"></script>\n</head>"
  },
  {
    "title": "",
    "content": "<body>\n  <header>\n    <h1>Comparador de Texto PDF – Dakialem</h1>\n  </header>\n\n  <main>\n    <div class=\"upload-section\">\n      <label for=\"pdf1\">Carregar PDF 1:</label>\n      <input type=\"file\" id=\"pdf1\" accept=\"application/pdf\" onchange=\"showFileName(this, 'fileName1')\" />\n      <div class=\"file-name\" id=\"fileName1\">Nenhum arquivo selecionado</div>\n\n      <label for=\"pdf2\">Carregar PDF 2:</label>\n      <input type=\"file\" id=\"pdf2\" accept=\"application/pdf\" onchange=\"showFileName(this, 'fileName2')\" />\n      <div class=\"file-name\" id=\"fileName2\">Nenhum arquivo selecionado</div>\n\n      <button onclick=\"comparePDFText()\">Comparar</button>\n    </div>\n\n    <div class=\"stats-summary\" id=\"statsSummary\" style=\"display: none;\">\n      <h3>Resumo da Comparação:</h3>\n      <div id=\"statsContent\"></div>\n    </div>\n\n    <div class=\"result-container\">\n      <div class=\"text-block\" id=\"text1\"><strong>PDF 1</strong><br><br></div>\n      <div class=\"text-block\" id=\"text2\"><strong>PDF 2</strong><br><br></div>\n    </div>\n  </main>\n\n  <footer>\n    &copy; 2025 Dakialem. Todos os direitos reservados.\n  </footer>\n"
  },
  {
    "title": "Script",
    "content": " <!-- PDF.js -->\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js\"></script>\n\n  <script>\n    const PDFJS = window['pdfjsLib'];\n    PDFJS.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';\n\n    function showFileName(input, labelId) {\n      const label = document.getElementById(labelId);\n      label.textContent = input.files.length ? input.files[0].name : 'Nenhum arquivo selecionado';\n    }\n\n    async function extractTextFromPDF(file) {\n      const buffer = await file.arrayBuffer();\n      const pdf = await PDFJS.getDocument({ data: buffer }).promise;\n      let fullText = [];\n\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const content = await page.getTextContent();\n        const strings = content.items.map(item => item.str.trim()).filter(str => str);\n        fullText.push(strings.join(\" \"));\n      }\n\n      return fullText.join(\"\\n\").trim();\n    }\n\n function diffWords(text1, text2) {\n  const dmp = new diff_match_patch();\n  const diffs = dmp.diff_main(text1, text2);\n  dmp.diff_cleanupSemantic(diffs);\n\n  let result1 = '', result2 = '';\n\n  diffs.forEach(([op, data]) => {\n    switch (op) {\n      case 0: // Igual\n        result1 += data;\n        result2 += data;\n        break;\n      case -1: // Apenas no texto 1\n        result1 += `<span class=\"highlight1\">${data}</span>`;\n        break;\n      case 1: // Apenas no texto 2\n        result2 += `<span class=\"highlight2\">${data}</span>`;\n        break;\n    }\n  });\n\n  return [result1, result2];\n}\n\n\n    function countStats(text) {\n      const words = text.trim().split(/\\s+/).filter(Boolean);\n      const characters = text.replace(/\\s+/g, '');\n      return {\n        wordCount: words.length,\n        charCount: characters.length\n      };\n    }\n\n    function getDiffPercentage(val1, val2) {\n      if (val1 === 0 && val2 === 0) return '0%';\n      const diff = Math.abs(val1 - val2);\n      const base = Math.max(val1, val2);\n      return ((diff / base) * 100).toFixed(2) + '%';\n    }\n\n    async function comparePDFText() {\n      const file1 = document.getElementById('pdf1').files[0];\n      const file2 = document.getElementById('pdf2').files[0];\n      const out1 = document.getElementById('text1');\n      const out2 = document.getElementById('text2');\n      const statsDiv = document.getElementById('statsSummary');\n      const statsContent = document.getElementById('statsContent');\n\n      if (!file1 || !file2) {\n        alert(\"Selecione os dois arquivos PDF.\");\n        return;\n      }\n\n      out1.innerHTML = \"<em>Extraindo texto do PDF 1...</em>\";\n      out2.innerHTML = \"<em>Extraindo texto do PDF 2...</em>\";\n      statsDiv.style.display = \"none\";\n\n      const [text1, text2] = await Promise.all([\n        extractTextFromPDF(file1),\n        extractTextFromPDF(file2)\n      ]);\n\n      const [diff1, diff2] = diffWords(text1, text2);\n\n      const stats1 = countStats(text1);\n      const stats2 = countStats(text2);\n\n      const wordDiff = getDiffPercentage(stats1.wordCount, stats2.wordCount);\n      const charDiff = getDiffPercentage(stats1.charCount, stats2.charCount);\n\n      statsContent.innerHTML = `\n        <strong>PDF 1:</strong> ${stats1.wordCount} palavras, ${stats1.charCount} caracteres<br>\n        <strong>PDF 2:</strong> ${stats2.wordCount} palavras, ${stats2.charCount} caracteres<br><br>\n        <strong>Diferença de palavras:</strong> ${wordDiff}<br>\n        <strong>Diferença de caracteres:</strong> ${charDiff}\n      `;\n      statsDiv.style.display = \"block\";\n\n      out1.innerHTML = \"<strong>PDF 1</strong><br><br>\" + diff1;\n      out2.innerHTML = \"<strong>PDF 2</strong><br><br>\" + diff2;\n    }\n  </script>"
  },
  {
    "title": "Finalização",
    "content": "</body>\n</html>"
  }
]